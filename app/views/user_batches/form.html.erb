<%= elmo_form_for(@user_batch, html: {multipart: true}) do |f| %>
  <p class="instructions"><%= formatted_instructions %></p>
  <%=hidden_field_tag(:temp_file_path, id: "temp_file_path")%>
  <div id="file-uploader">
    <div id="dropzone-file-uploader" class="dropzone">
    </div>
  </div>
  <div class="submit-buttons">
    <%= f.submit(t("common.import"), class: "btn btn-primary") %>
  </div>
<% end %>

<%= javascript_doc_ready do %>
  ELMO.fileUploaderManager = new ELMO.Views.FileUploaderManager({el: "#new_user_batch"});
  options = <%=json(
    el: "#file-uploader",
    zoneId: "#dropzone-file-uploader",
    genericThumbPath: nil,
    postPath: "#{user_batches_path}/upload",
    previewTemplate: render("layouts/dropzone_preview"),
    paramName: "userbatch",
    metaFieldResponseAttr: "tempFilePath"
  )%>
  options.listener = ELMO.fileUploaderManager;
  new ELMO.Views.FileUploaderView(options);
<% end %>
